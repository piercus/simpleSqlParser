!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.simpleSqlParser=n()}}(function(){return function n(e,r,t){function i(o,s){if(!r[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(u)return u(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var a=r[o]={exports:{}};e[o][0].call(a.exports,function(n){var r=e[o][1][n];return i(r?r:n)},a,a.exports,n,e,r,t)}return r[o].exports}for(var u="function"==typeof require&&require,o=0;o<t.length;o++)i(t[o]);return i}({1:[function(n,e){"use strict";e.exports.sql2ast=n("./src/sql2ast.js"),e.exports.ast2sql=n("./src/ast2sql.js")},{"./src/ast2sql.js":2,"./src/sql2ast.js":3}],2:[function(n,e){"use strict";e.exports=function(n){function e(n){var e="SELECT ";return e+=n.select.map(function(n){return n.expression}).join(", ")}function r(n){var e="FROM ";return e+=n.from.map(function(n){return n.expression}).join(", ")}function t(n){return n.join.map(function(n){var e="";if("inner"===n.type)e+="INNER JOIN ";else if("left"===n.type)e+="LEFT JOIN ";else{if("right"!==n.type)return"";e+="RIGHT JOIN "}return e+=n.table,null!==n.alias&&(e+=" AS "+n.alias),e+=" ON ",e+=n.condition.expression}).join(" ")}function i(n){var e="";return null!==n.where&&(e+="WHERE "+n.where.expression),e}function u(n){var e="";return n.group.length>0&&(e+="GROUP BY ",e+=n.group.map(function(n){return n.expression}).join(", ")),e}function o(n){var e="";return n.order.length>0&&(e+="ORDER BY ",e+=n.order.map(function(n){return n.expression}).join(", ")),e}function s(n){var e="";return null!==n.limit&&(e+="LIMIT ",null!==n.limit.from&&(e+=n.limit.from+", "),e+=n.limit.nb),e}function l(n){return"INSERT INTO "+n.into.expression}function p(n){var e="",r=n.values.filter(function(n){return null!==n.target});return r.length>0&&(e+="(",e+=r.map(function(n){return n.target.expression}).join(", "),e+=") "),e+="VALUES (",e+=n.values.map(function(n){return n.value}).join(", "),e+=")"}function a(n){return"UPDATE "+n.table.expression}function f(n){var e="SET ";return e+=n.values.map(function(n){return n.target.expression+" = "+n.value}).join(", ")}if("object"!=typeof n||n.status!==!0)return!1;n=n.value;var c=[];if("select"===n.type)c.push(e(n)),c.push(r(n)),c.push(t(n)),c.push(i(n)),c.push(u(n)),c.push(o(n)),c.push(s(n));else if("insert"===n.type)c.push(l(n)),c.push(p(n));else if("update"===n.type)c.push(a(n)),c.push(f(n)),c.push(i(n));else{if("delete"!==n.type)return!1;c.push("DELETE"),c.push(r(n)),c.push(i(n))}return c.filter(function(n){return""!==n}).join(" ")}},{}],3:[function(n,e){(function(n){"use strict";function r(n,e){return"undefined"==typeof e&&(e=[]),n.or(a.succeed(e))}function t(n){return n.join("")}function i(n){return n[0].push(n[1]),n[0]}function u(n){return f(n.skip(d).skip(x(",")).skip(d).many(),n.skip(d)).map(i)}function o(n){return n.replace(/^([`'"])(.*)\1$/,"$2")}function s(n){return f(a.index,n,a.index).map(function(n){var e={start:n[0],end:n[2]};if("object"==typeof n[1]){var r=n[1];return r.position=e,r}return e.out=n[1],e})}function l(n){var e={};return e._=function(e,r){var t=s(n)._(e,r);return t.value.expression=e.substring(t.value.position.start,t.value.position.end),t},e}var p,a="undefined"!=typeof window?window.parsimmon:"undefined"!=typeof n?n.parsimmon:null,f=a.seq,c=a.alt,m=a.regex,x=a.string,d=a.optWhitespace,h=a.whitespace,E=a.lazy,v=c(m(/(?!(FROM|WHERE|GROUP BY|ORDER BY|LIMIT|INNER|LEFT|RIGHT|JOIN|ON|VALUES|SET)\s)#?[a-z*][a-z0-9_]*/i),m(/`[^`\\]*(?:\\.[^`\\]*)*`/)),y=c(m(/"[^"\\]*(?:\\.[^"\\]*)*"/),m(/'[^'\\]*(?:\\.[^'\\]*)*'/)),I=f(c(m(/[a-zA-Z0-9_]+\(/),x("(")),r(E(function(){return M})).map(t),x(")")).map(t),O=f(v,x("."),v),N=c(x("+"),x("-"),x("*"),x("/"),x("&&"),x("&"),x("~"),x("||"),x("|"),x("^"),m(/XOR/i),x("<=>"),x("="),x("!="),x(">="),x(">>"),x(">"),x("<="),x("<<"),x("<"),m(/IS NULL/i),m(/IS NOT/i),m(/IS NOT NULL/i),m(/IS/i),m(/LIKE/i),m(/NOT LIKE/i),x("%"),m(/MOD/i),m(/NOT/i),m(/OR\s/i),m(/AND/i),m(/IN/i)),R=m(/[-]?\d+\.?\d*/),T=f(x("("),d,f(c(R,y),d,r(x(",")),d,r(c(R,y))).map(t),d,x(")")).map(t),b=f(c(O.map(function(n){return{expression:n.join(""),table:o(n[0]),column:o(n[2])}}),I.map(function(n){return{expression:n,table:null,column:null}}),v.map(function(n){return{expression:n,table:null,column:o(n)}}),y.map(function(n){return{expression:n,table:null,column:null}}),R.map(function(n){return{expression:n,table:null,column:null}}),T.map(function(n){return{expression:n,table:null,column:null}})),r(f(d,N,r(f(d,E(function(){return b}).map(function(n){return n.expression})).map(t),null)).map(t),null)).map(function(n){return null!==n[1]?(n[0]=n[0].expression,{expression:n.join(""),table:null,column:null}):n[0]}),j=f(b,r(f(d,r(m(/AS\s/i)),c(v,y)).map(function(n){var e={};return e.alias=o(n[2]),e.expression=n.join(""),e}),null)).map(function(n){var e=n[0];return e.alias=null!==n[1]?n[1].alias:null,e.expression=e.expression+(null!==n[1]?n[1].expression:""),e}),g=b.map(function(n){return n.expression}),w=f(c(O.map(t),v,f(x("("),E(function(){return l(p)}),x(")")).map(function(n){var e=n[1];return e.expression=n[0]+n[1].expression+n[2],e})),r(f(d,r(m(/AS\s/i)),c(v,y)).map(function(n){return{alias:o(n[2]),expression:n.join("")}}),null)).map(function(n){var e={};return e.table=n[0],e.alias=null!==n[1]?n[1].alias:null,e.expression=(n[0].expression||n[0])+(null!==n[1]?n[1].expression:""),e}),L=f(r(f(m(/INNER|LEFT|RIGHT/i),h).map(function(n){return n[0].toLowerCase()}),null),m(/JOIN/i),d,s(w),d,m(/ON/i),d,s(b)).map(function(n){var e={};return e.type=n[0]||"inner",e.table=n[3].table,e.alias=n[3].alias,e.position=n[3].position,e.condition={expression:n[7].expression,position:n[7].position},e}),S=s(b).map(function(n){return{expression:n.expression,position:n.position}}),k=f(b,r(f(d,m(/ASC|DESC/i)),null)).map(function(n){return{expression:n[0].expression+(null!==n[1]?n[1].join(""):""),order:null!==n[1]?n[1][1]:"ASC",table:n[0].table,column:n[0].column}}),q=f(R,r(f(d,x(","),d,R),null)).map(function(n){return null===n[1]?{from:null,nb:parseInt(n[0],10)}:{from:parseInt(n[0],10),nb:parseInt(n[1][3],10)}}),A=c(O.map(function(n){return{expression:n.join(""),column:o(n[2])}}),v.map(function(n){return{expression:n,column:o(n)}})),D=b.map(function(n){return n.expression}),U=f(A,d,x("="),d,b).map(function(n){return{target:n[0],value:n[4].expression}}),M=f(f(g,d,x(","),d).map(t).many(),g.skip(d)).map(i),F=u(s(j)),H=u(s(w)),C=u(s(b)),B=u(s(k)),G=d.then(L).skip(d).many(),P=u(A),W=u(D),Y=u(U);p=f(m(/SELECT/i).skip(d).then(r(F)),m(/FROM/i).skip(d).then(r(H)),r(G),r(m(/WHERE/i).skip(d).then(r(S)),null),r(m(/\s?GROUP BY/i).skip(d).then(r(C))),r(m(/\s?ORDER BY/i).skip(d).then(r(B))),r(m(/\s?LIMIT/i).skip(d).then(r(q)),null)).map(function(n){return{type:"select",select:n[0],from:n[1],join:n[2],where:n[3],group:n[4],order:n[5],limit:n[6]}});var _=f(m(/INSERT INTO/i).skip(d).then(w),d,r(f(x("("),P,x(")")).map(function(n){return n[1]})),d,m(/VALUES\s?\(/i).skip(d).then(W),x(")")).map(function(n){for(var e=[],r=Math.max(n[2].length,n[4].length),t=0;r>t;++t)e[t]={target:n[2][t]||null,value:n[4][t]||null};return{type:"insert",into:n[0],values:e}}),J=f(m(/UPDATE/i).skip(d).then(w),d,m(/SET/i).skip(d).then(Y),d,r(m(/WHERE/i).skip(d).then(r(S)),null)).map(function(n){return{type:"update",table:n[0],values:n[2],where:n[4]}}),z=f(m(/DELETE FROM/i).skip(d).then(r(H)),r(m(/WHERE/i).skip(d).then(r(S)),null)).map(function(n){return{type:"delete",from:n[0],where:n[1]}}),V=c(p,_,J,z);e.exports=function(n){var e=V.parse(n);return e.status===!1&&(e.error=a.formatError(n,e)),e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});